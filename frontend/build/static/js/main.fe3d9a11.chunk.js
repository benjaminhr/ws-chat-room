(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},15:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(9),o=a.n(r),c=a(7),i=a(2),u=a(3),l=a(5),m=a(4),d=a(6),b=a(1),v=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={value:"",socket:null},e.onSubmit=e.onSubmit.bind(Object(b.a)(Object(b.a)(e))),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=new WebSocket("ws://35.228.115.67");this.setState({socket:e})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),!localStorage.getItem("username")){var t=new CustomEvent("error",{detail:{type:"new",message:"You must create a username before you can send messages."}});window.dispatchEvent(t)}this.state.value.length>=1&&this.sendMessage()}},{key:"sendMessage",value:function(){if(1===this.state.socket.readyState){var e=localStorage.getItem("username"),t=JSON.stringify({type:"new",message:{text:this.state.value,timestamp:Number(new Date),sender:e}});this.state.socket.send(t),this.setState({value:""})}else console.log("Unable to connect to websocket"),window.location.reload()}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"message-form",onSubmit:this.onSubmit,autoComplete:"off"},s.a.createElement("input",{type:"text",className:"message-input",placeholder:"Type your message...",autoFocus:!0,value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})}}),s.a.createElement("button",{className:"send-button"},"\u25bb"))}}]),t}(s.a.Component),h=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",{className:"messages"},this.props.messages.map(function(e){return s.a.createElement("li",{key:e._id},s.a.createElement("span",{className:"sender"},e.sender,":")," ",e.text)}))}}]),t}(s.a.Component),g=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={username:""},e.submitUsername=e.submitUsername.bind(Object(b.a)(Object(b.a)(e))),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"submitUsername",value:function(e){e.preventDefault();var t=this.state.username;if(t.length<=2){var a=new CustomEvent("error",{detail:{type:"new",message:"Username must be at least 3 characters."}});window.dispatchEvent(a)}else localStorage.setItem("username",t),this.setState({username:""})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"username",onSubmit:this.submitUsername},s.a.createElement("input",{type:"text",onChange:function(t){return e.setState({username:t.target.value})},placeholder:"Enter username...",autoFocus:!0,autoComplete:"false",value:this.state.username}),s.a.createElement("button",null,"Submit"))}}]),t}(s.a.Component),p=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).closeModal=e.closeModal.bind(Object(b.a)(Object(b.a)(e))),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"closeModal",value:function(){var e=new CustomEvent("error",{detail:{type:"close"}});window.dispatchEvent(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"error-modal"},s.a.createElement("div",{className:"error"},s.a.createElement("h1",null,this.props.message),s.a.createElement("button",{onClick:this.closeModal},"X")))}}]),t}(s.a.Component),f=(a(15),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={messages:[],error:!1,errorMessage:""},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new WebSocket("ws://35.228.115.67");t.addEventListener("open",function(){t.send(JSON.stringify({type:"all"}))}),t.addEventListener("error",function(e){console.error("ERROR: "+e)}),t.addEventListener("message",function(t){var a=JSON.parse(t.data),n=e.state.messages;console.log(a),"messages"===a.type?e.setState({messages:Object(c.a)(n).concat(Object(c.a)(a.messages))}):e.setState({messages:Object(c.a)(n).concat([a.message])})}),window.addEventListener("error",function(t){var a=t.detail;"new"===a.type?e.setState({error:!0,errorMessage:a.message}):e.setState({error:!1})})}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state.error&&s.a.createElement(p,{message:this.state.errorMessage}),s.a.createElement(g,null),s.a.createElement("div",{className:"message-app"},s.a.createElement(h,{messages:this.state.messages}),s.a.createElement(v,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.fe3d9a11.chunk.js.map